<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../helpproject.xsl" ?>
<topic template="Default" lasteditedby="xp" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../helpproject.xsd">
  <title translate="true">How to check data before saving the task (Before Task Edit Trigger)</title>
  <body>
    <header>
      <para styleclass="Heading1"><text styleclass="Heading1" translate="true">How to check data before saving the task (Before Task Edit Trigger)</text></para>
    </header>
    <para styleclass="Normal" style="margin-top:16px; line-height:1.00; background-color:#ffffff; tabstops:none;"><text styleclass="Normal" style="font-family:Verdana; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">So as to check the data before saving the current task, trigger Before Edit Task must be connected to its workflow.</text></para>
    <para styleclass="Normal" style="line-height:1.00; background-color:#ffffff; tabstops:none;"><text styleclass="Normal" style="font-family:Verdana; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">It must conform to the interface</text><text styleclass="apple-converted-space" style="font-family:Verdana; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Verdana; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">com.trackstudio.external.TaskTrigger</text><text styleclass="apple-converted-space" style="font-family:Verdana; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Verdana; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">and located in the folder</text></para>
    <para styleclass="Normal_workflow" style="text-align:left; text-indent:0px; margin-top:16px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:#ffffcc; white-space:normal; page-break-inside:auto; page-break-after:auto; padding:8px; border-color:#606060; border-style:single; border-width:1px; tabstops:none;"><text styleclass="workflow" style="font-family:Verdana; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">./etc/plugins/scripts/before_edit_task/</text></para>
    <para styleclass="Normal" style="margin-top:16px; line-height:1.00; background-color:#ffffff; tabstops:none;"><text styleclass="Normal" style="font-family:Verdana; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Below given is the example of trigger, which checks, whether the deadline indicated for the task is correct or not. So that the user is informed about the error and the task is not saved, UserException is thrown in the trigger. Thus the user returns to the edit page of the task. The Data remain typed.</text></para>
    <para styleclass="Code Example" style="margin-top:16px; line-height:1.00; background-color:#ffffcc; padding:8px; border-color:#606060; border-style:single; border-width:1px; tabstops:none;"><text styleclass="workflow" style="font-family:&apos;Courier New&apos;; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">package scripts.before_edit_task;</text><br/><text styleclass="workflow" style="font-family:&apos;Courier New&apos;; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">import com.trackstudio.exception.GranException;</text><br/><text styleclass="workflow" style="font-family:&apos;Courier New&apos;; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">import com.trackstudio.exception.UserException;</text><br/><text styleclass="workflow" style="font-family:&apos;Courier New&apos;; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">import com.trackstudio.external.TaskTrigger;</text><br/><text styleclass="workflow" style="font-family:&apos;Courier New&apos;; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">import com.trackstudio.secured.SecuredTaskTriggerBean;</text><br/><text styleclass="workflow" style="font-family:&apos;Courier New&apos;; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">import java.util.Calendar;</text><br/><text styleclass="workflow" style="font-family:&apos;Courier New&apos;; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">public class CheckDeadline implements TaskTrigger {</text><br/><text styleclass="workflow" style="font-family:&apos;Courier New&apos;; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true"> &#160; &#160;public SecuredTaskTriggerBean execute(SecuredTaskTriggerBean securedTaskTriggerBean) throws GranException {</text><br/><text styleclass="workflow" style="font-family:&apos;Courier New&apos;; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true"> &#160; &#160; &#160; &#160;Calendar deadline = securedTaskTriggerBean.getDeadline();</text><br/><text styleclass="workflow" style="font-family:&apos;Courier New&apos;; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true"> &#160; &#160; &#160; &#160;Calendar now = Calendar.getInstance();</text><br/><text styleclass="workflow" style="font-family:&apos;Courier New&apos;; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true"> &#160; &#160; &#160; &#160;if (deadline == null || deadline.before(now)) throw new UserException(&quot;Indicate the deadline of the task&quot;);</text><br/><text styleclass="workflow" style="font-family:&apos;Courier New&apos;; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true"> &#160; &#160; &#160; &#160;return securedTaskTriggerBean;</text><br/><text styleclass="workflow" style="font-family:&apos;Courier New&apos;; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true"> &#160; &#160;}</text><br/><text styleclass="workflow" style="font-family:&apos;Courier New&apos;; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">}</text></para>
    <para styleclass="Normal" style="margin-top:16px; margin-bottom:16px; line-height:1.00; background-color:#ffffff; tabstops:none;"><text styleclass="Normal" style="font-family:Verdana; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">With the help of triggers Before Edit Task, generally those tasks are performed which have to be executed before saving the task, so that if these actions were not successful the user could return to the input page and repeat the actions.</text></para>
  </body>
</topic>
