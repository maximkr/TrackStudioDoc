<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../helpproject.xsl" ?>
<topic template="Default" lasteditedby="Administrator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../helpproject.xsd">
  <title translate="true">How to check data before saving the task (Before Task Edit Trigger)</title>
  <body>
    <header>
      <para styleclass="Heading1"><text styleclass="Heading1" translate="true">How to check data before saving the task (Before Task Edit Trigger)</text></para>
    </header>
    <para styleclass="Normal" style="text-indent:48px; background-color:#ffffff;"><text styleclass="Normal" style="font-family:Verdana; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">So as to check the data before saving the current task, trigger Before Edit Task must be connected to its workflow.</text></para>
    <para styleclass="Normal" style="text-indent:48px; background-color:#ffffff;"><text styleclass="Normal" style="font-family:Verdana; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">It must conform to the interface</text><text styleclass="apple-converted-space" style="font-family:Verdana; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Verdana; font-size:12pt; font-weight:bold; vertical-align:baseline; color:#000000;" translate="true">com.trackstudio.external.TaskTrigger</text><text styleclass="apple-converted-space" style="font-family:Verdana; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Verdana; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">and located in the folder</text></para>
    <para styleclass="Normal" style="text-indent:48px; background-color:#ffffff;"></para>
    <para styleclass="Code"><text styleclass="Code" translate="true">./etc/plugins/scripts/before_edit_task/</text></para>
    <para styleclass="Normal" style="text-indent:48px; background-color:#ffffff;"></para>
    <para styleclass="Normal" style="text-indent:48px; background-color:#ffffff;"><text styleclass="Normal" style="font-family:Verdana; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">Below given is the example of trigger, which checks, whether the deadline indicated for the task is correct or not. So that the user is informed about the error and the task is not saved, UserException is thrown in the trigger. Thus the user returns to the edit page of the task. The Data remain typed.</text></para>
    <para styleclass="Normal" style="text-indent:48px; background-color:#ffffff;"></para>
    <para styleclass="Code Example"><text styleclass="Code Example" translate="true">package scripts.before_edit_task;</text><br/><text styleclass="Code Example" translate="true">import com.trackstudio.exception.GranException;</text><br/><text styleclass="Code Example" translate="true">import com.trackstudio.exception.UserException;</text><br/><text styleclass="Code Example" translate="true">import com.trackstudio.external.TaskTrigger;</text><br/><text styleclass="Code Example" translate="true">import com.trackstudio.secured.SecuredTaskTriggerBean;</text><br/><text styleclass="Code Example" translate="true">import java.util.Calendar;</text><br/><text styleclass="Code Example" translate="true">public class CheckDeadline implements TaskTrigger {</text><br/><text styleclass="Code Example" translate="true"> &#160; &#160;public SecuredTaskTriggerBean execute(SecuredTaskTriggerBean securedTaskTriggerBean) throws GranException {</text><br/><text styleclass="Code Example" translate="true"> &#160; &#160; &#160; &#160;Calendar deadline = securedTaskTriggerBean.getDeadline();</text><br/><text styleclass="Code Example" translate="true"> &#160; &#160; &#160; &#160;Calendar now = Calendar.getInstance();</text><br/><text styleclass="Code Example" translate="true"> &#160; &#160; &#160; &#160;if (deadline == null || deadline.before(now)) throw new UserException(&quot;Indicate the deadline of the task&quot;);</text><br/><text styleclass="Code Example" translate="true"> &#160; &#160; &#160; &#160;return securedTaskTriggerBean;</text><br/><text styleclass="Code Example" translate="true"> &#160; &#160;}</text><br/><text styleclass="Code Example" translate="true">}</text></para>
    <para styleclass="Normal" style="text-indent:48px; background-color:#ffffff;"></para>
    <para styleclass="Normal" style="text-indent:48px; background-color:#ffffff;"><text styleclass="Normal" style="font-family:Verdana; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">With the help of triggers Before Edit Task, generally those tasks are performed which have to be executed before saving the task, so that if these actions were not successful the user could return to the input page and repeat the actions.</text></para>
    <para styleclass="Normal" style="text-indent:48px; background-color:#ffffff; page-break-before:always;"></para>
  </body>
</topic>
