<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../helpproject.xsl" ?>
<topic template="Default" lasteditedby="xp" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../helpproject.xsd">
  <title translate="true">Как использовать интерфейс SOAP для TrackStudio</title>
  <body>
    <header>
      <para styleclass="Heading1"><text styleclass="Heading1" translate="true">Как использовать интерфейс SOAP для TrackStudio</text></para>
    </header>
    <para styleclass="Normal" style="text-align:left; text-indent:37px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:#ffffff; white-space:normal; page-break-inside:auto; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Verdana; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">Для работы с SOAP в папке</text><text styleclass="apple-converted-space" style="font-family:Verdana; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Verdana; font-size:12pt; font-weight:bold; vertical-align:baseline; color:#000000;" translate="true">etc/deveopment/soap</text><text styleclass="apple-converted-space" style="font-family:Verdana; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Verdana; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">лежит проект.</text></para>
    <para styleclass="Normal" style="text-align:left; text-indent:37px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:#ffffff; white-space:normal; page-break-inside:auto; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Verdana; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">Нужные ресурсы генерируются при помощи команды</text></para>
    <para styleclass="Normal" style="text-align:left; text-indent:37px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:#ffffff; white-space:normal; page-break-inside:auto; page-break-after:auto; tabstops:none;"></para>
    <para styleclass="Code"><text styleclass="Code" translate="true">mvn generate-resources</text></para>
    <para styleclass="Normal" style="text-align:left; text-indent:37px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:#ffffff; white-space:normal; page-break-inside:auto; page-break-after:auto; tabstops:none;"></para>
    <para styleclass="Normal" style="text-align:left; text-indent:37px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:#ffffff; white-space:normal; page-break-inside:auto; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Verdana; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">Открыв проект в среде разработки, папку</text><text styleclass="apple-converted-space" style="font-family:Verdana; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Verdana; font-size:12pt; font-weight:bold; vertical-align:baseline; color:#000000;" translate="true">target/generated-sources/cxf</text><text styleclass="apple-converted-space" style="font-family:Verdana; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Verdana; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">отметить как sources.</text></para>
    <para styleclass="Normal" style="text-align:left; text-indent:37px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:#ffffff; white-space:normal; page-break-inside:auto; page-break-after:auto; tabstops:none;"></para>
    <para styleclass="Style"><image src="soapidea.PNG" scale="-100.00%" width="1244" height="489" padding="1 0 1 0" styleclass="Style"></image></para>
    <para styleclass="Normal" style="text-align:left; text-indent:37px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:#ffffff; white-space:normal; page-break-inside:auto; page-break-after:auto; tabstops:none;"></para>
    <para styleclass="Normal" style="text-align:left; text-indent:37px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:#ffffff; white-space:normal; page-break-inside:auto; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Verdana; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">После этого можно приступить к написанию своего SOAP-клиента либо воспользоваться уже готовым примером из проекта.</text></para>
    <para styleclass="Normal" style="text-align:left; text-indent:37px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:#ffffff; white-space:normal; page-break-inside:auto; page-break-after:auto; tabstops:none;"></para>
    <para styleclass="Normal" style="text-align:left; text-indent:37px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:#ffffff; white-space:normal; page-break-inside:auto; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Verdana; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">В SOAP вы можете оперировать сервисами или контейнерами. Сервисы нужны для выполнения различных функций, в контейнерах, соответственно, переносятся данные.</text></para>
    <para styleclass="Normal" style="text-align:left; text-indent:37px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:#ffffff; white-space:normal; page-break-inside:auto; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Verdana; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">Сервис для манипулирования задачами можно получить, например, так:</text></para>
    <para styleclass="Normal" style="text-align:left; text-indent:37px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:#ffffff; white-space:normal; page-break-inside:auto; page-break-after:auto; tabstops:none;"></para>
    <para styleclass="Code"><text styleclass="Code" translate="true">public static final String url = &quot;http://localhost:8888/TrackStudio/services/&quot;;</text></para>
    <para styleclass="Code"><text styleclass="Code" translate="true">public Task getTaskService(url) throws MalformedURLException {</text></para>
    <para styleclass="Code"><text styleclass="Code" translate="true"> &#160; &#160; &#160; &#160;TaskService service = new TaskService(new URL(url + Task.class.getSimpleName() + &quot;?wsdl&quot;),</text></para>
    <para styleclass="Code"><text styleclass="Code" translate="true"> &#160; &#160; &#160; &#160;new QName(&quot;http://task.service.soap.trackstudio.com/&quot;, &quot;TaskService&quot;));</text></para>
    <para styleclass="Code"><text styleclass="Code" translate="true"> &#160; &#160; &#160; &#160;return service.getTaskPort();</text></para>
    <para styleclass="Code"><text styleclass="Code" translate="true"> &#160; &#160;}</text></para>
    <para styleclass="Normal" style="text-align:left; text-indent:37px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:#ffffff; white-space:normal; page-break-inside:auto; page-break-after:auto; tabstops:none;"></para>
    <para styleclass="Normal" style="text-align:left; text-indent:37px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:#ffffff; white-space:normal; page-break-inside:auto; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Verdana; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">url, разумеется, нужно подставить свой.</text></para>
    <para styleclass="Normal" style="text-align:left; text-indent:37px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:#ffffff; white-space:normal; page-break-inside:auto; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Verdana; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">Теперь чтобы, например, создать задачу, нужно выполнить метод createTask сервиса TaskService:</text></para>
    <para styleclass="Normal" style="text-align:left; text-indent:37px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:#ffffff; white-space:normal; page-break-inside:auto; page-break-after:auto; tabstops:none;"></para>
    <para styleclass="Code"><text styleclass="Code" translate="true">public String createTask(@WebParam(name = &quot;sessionId&quot;) String sessionId,</text></para>
    <para styleclass="Code"><text styleclass="Code" translate="true"> &#160; &#160;@WebParam(name = &quot;categoryId&quot;) String categoryId, @WebParam(name = &quot;shortname&quot;) String shortname,</text></para>
    <para styleclass="Code"><text styleclass="Code" translate="true"> &#160; &#160;@WebParam(name = &quot;name&quot;) String name, @WebParam(name = &quot;description&quot;) String description,</text></para>
    <para styleclass="Code"><text styleclass="Code" translate="true"> &#160; &#160;@WebParam(name = &quot;budget&quot;) long budget, @WebParam(name = &quot;deadline&quot;) long deadline,</text></para>
    <para styleclass="Code"><text styleclass="Code" translate="true"> &#160; &#160;@WebParam(name = &quot;priorityId&quot;) String priorityId, @WebParam(name = &quot;parentId&quot;) String parentId,</text></para>
    <para styleclass="Code"><text styleclass="Code" translate="true"> &#160; &#160;@WebParam(name = &quot;handlerUserId&quot;) String handlerUserId,</text></para>
    <para styleclass="Code"><text styleclass="Code" translate="true"> &#160; &#160;@WebParam(name = &quot;handlerGroupId&quot;) String handlerGroupId,</text></para>
    <para styleclass="Code"><text styleclass="Code" translate="true"> &#160; &#160;@WebParam(name = &quot;udfNames&quot;) String[] udfNames,</text></para>
    <para styleclass="Code"><text styleclass="Code" translate="true"> &#160; &#160;@WebParam(name = &quot;udfValues&quot;) String[] udfValues) throws Exception;</text></para>
    <para styleclass="Normal" style="text-align:left; text-indent:37px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:#ffffff; white-space:normal; page-break-inside:auto; page-break-after:auto; tabstops:none;"></para>
    <para styleclass="Normal" style="text-align:left; text-indent:37px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:#ffffff; white-space:normal; page-break-inside:auto; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Verdana; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">Для получения списка задач у которых определенное поле (UDF) равно заданному значению нужно использовать следующий код</text></para>
    <para styleclass="Normal" style="text-align:left; text-indent:37px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:#ffffff; white-space:normal; page-break-inside:auto; page-break-after:auto; tabstops:none;"></para>
    <para styleclass="Code"><text styleclass="Code" translate="true">TaskFvalueBean taskFvalueBean = new TaskFvalueBean();</text></para>
    <para styleclass="Code"><text styleclass="Code" translate="true"> &#160; &#160; &#160; &#160;taskFvalueBean.setSubtask(&quot;1&quot;);</text></para>
    <para styleclass="Code"><text styleclass="Code" translate="true"> &#160; &#160; &#160; &#160;taskFvalueBean.getUdfs().add(&quot;UDF8a80828f4a0619c0014a062a5cc00004-&gt;_eq_test&quot;);</text></para>
    <para styleclass="Code"><text styleclass="Code" translate="true"> &#160; &#160; &#160; &#160;TaskSliderBean sliderBean = task.getTaskList(sessionId, taskId, taskFvalueBean, true, 20, new ArrayList&lt;String&gt;());</text></para>
    <para styleclass="Normal" style="text-align:left; text-indent:37px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:#ffffff; white-space:normal; page-break-inside:auto; page-break-after:auto; tabstops:none;"></para>
    <para styleclass="Normal" style="text-align:left; text-indent:37px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:#ffffff; white-space:normal; page-break-inside:auto; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Verdana; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">Если необходимо найти задачи закрытые в определенный период используется код</text></para>
    <para styleclass="Normal" style="text-align:left; text-indent:37px; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; line-height:1.00; background-color:#ffffff; white-space:normal; page-break-inside:auto; page-break-after:auto; tabstops:none;"></para>
    <para styleclass="Code"><text styleclass="Code" translate="true">GregorianCalendar date = new GregorianCalendar(2014, 12, 1);</text></para>
    <para styleclass="Code"><text styleclass="Code" translate="true"> &#160; &#160; &#160; &#160;TaskFvalueBean taskFvalueBean = new TaskFvalueBean();</text></para>
    <para styleclass="Code"><text styleclass="Code" translate="true"> &#160; &#160; &#160; &#160;taskFvalueBean.setSubtask(&quot;1&quot;);</text></para>
    <para styleclass="Code"><text styleclass="Code" translate="true"> &#160; &#160; &#160; &#160;taskFvalueBean.setCloseDate(&quot;_&quot;+String.valueOf(date.getTimeInMillis())); &#160; /*c &#160;указанной даты */</text></para>
    <para styleclass="Code"><text styleclass="Code" translate="true"> &#160; &#160; &#160; &#160;taskFvalueBean.setCloseDate(String.valueOf(date.getTimeInMillis())); &#160; &#160; &#160; /*по указанную дату */</text></para>
    <para styleclass="Code"><text styleclass="Code" translate="true"> &#160; &#160; &#160; &#160;TaskSliderBean sliderBean = task.getTaskList(sessionId, taskId, taskFvalueBean, true, 20, new ArrayList&lt;String&gt;());</text></para>
    <para style="text-indent:37px; page-break-before:always;"></para>
  </body>
</topic>
